{"version":3,"file":"AllowBackup.js","sourceRoot":"","sources":["../../src/android/AllowBackup.ts"],"names":[],"mappings":";;;AAEA,gEAAyE;AACzE,yCAAgF;AAEnE,QAAA,eAAe,GAAG,6CAA2B,CAAC,cAAc,EAAE,iBAAiB,CAAC,CAAC;AAE9F,SAAgB,cAAc,CAAC,MAAmC;;IAChE,oBAAoB;IACpB,+DAA+D;IAC/D,OAAO,MAAA,MAAA,MAAM,CAAC,OAAO,0CAAE,WAAW,mCAAI,IAAI,CAAC;AAC7C,CAAC;AAJD,wCAIC;AAED,SAAgB,cAAc,CAC5B,MAAmC,EACnC,eAAgC;IAEhC,MAAM,WAAW,GAAG,cAAc,CAAC,MAAM,CAAC,CAAC;IAE3C,MAAM,eAAe,GAAG,6BAAkB,CAAC,eAAe,CAAC,CAAC;IAC5D,IAAI,eAAe,aAAf,eAAe,uBAAf,eAAe,CAAE,CAAC,EAAE;QACtB,eAAe,CAAC,CAAC,CAAC,qBAAqB,CAAC,GAAG,MAAM,CAAC,WAAW,CAAkB,CAAC;KACjF;IAED,OAAO,eAAe,CAAC;AACzB,CAAC;AAZD,wCAYC;AAED,SAAgB,0BAA0B,CAAC,eAAgC;IACzE,MAAM,eAAe,GAAG,6BAAkB,CAAC,eAAe,CAAC,CAAC;IAE5D,IAAI,eAAe,aAAf,eAAe,uBAAf,eAAe,CAAE,CAAC,EAAE;QACtB,OAAO,MAAM,CAAC,eAAe,CAAC,CAAC,CAAC,qBAAqB,CAAC,CAAC,KAAK,MAAM,CAAC;KACpE;IAED,OAAO,IAAI,CAAC;AACd,CAAC;AARD,gEAQC","sourcesContent":["import { ExpoConfig } from '@expo/config-types';\n\nimport { createAndroidManifestPlugin } from '../plugins/android-plugins';\nimport { AndroidManifest, getMainApplication, StringBoolean } from './Manifest';\n\nexport const withAllowBackup = createAndroidManifestPlugin(setAllowBackup, 'withAllowBackup');\n\nexport function getAllowBackup(config: Pick<ExpoConfig, 'android'>) {\n  // Defaults to true.\n  // https://docs.expo.io/versions/latest/config/app/#allowbackup\n  return config.android?.allowBackup ?? true;\n}\n\nexport function setAllowBackup(\n  config: Pick<ExpoConfig, 'android'>,\n  androidManifest: AndroidManifest\n) {\n  const allowBackup = getAllowBackup(config);\n\n  const mainApplication = getMainApplication(androidManifest);\n  if (mainApplication?.$) {\n    mainApplication.$['android:allowBackup'] = String(allowBackup) as StringBoolean;\n  }\n\n  return androidManifest;\n}\n\nexport function getAllowBackupFromManifest(androidManifest: AndroidManifest): boolean | null {\n  const mainApplication = getMainApplication(androidManifest);\n\n  if (mainApplication?.$) {\n    return String(mainApplication.$['android:allowBackup']) === 'true';\n  }\n\n  return null;\n}\n"]}