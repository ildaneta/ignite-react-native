{"version":3,"sources":["../../src/android/Branch.ts"],"names":["META_BRANCH_KEY","withBranch","setBranchApiKey","getBranchApiKey","config","android","branch","apiKey","androidManifest","mainApplication"],"mappings":";;;;;;;;;AAEA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAOA,MAAMA,eAAe,GAAG,yBAAxB;AAEO,MAAMC,UAAU,GAAG,mDAA4BC,eAA5B,EAA6C,YAA7C,CAAnB;;;AAEA,SAASC,eAAT,CAAyBC,MAAzB,EAA6C;AAAA;;AAClD,qDAAOA,MAAM,CAACC,OAAd,8EAAO,gBAAgBD,MAAvB,qFAAO,uBAAwBE,MAA/B,2DAAO,uBAAgCC,MAAvC,yEAAiD,IAAjD;AACD;;AAEM,SAASL,eAAT,CAAyBE,MAAzB,EAA6CI,eAA7C,EAA+E;AACpF,QAAMD,MAAM,GAAGJ,eAAe,CAACC,MAAD,CAA9B;AAEA,QAAMK,eAAe,GAAG,2CAA0BD,eAA1B,CAAxB;;AAEA,MAAID,MAAJ,EAAY;AACV;AACA,sDAAiCE,eAAjC,EAAkDT,eAAlD,EAAmEO,MAAnE;AACD,GAHD,MAGO;AACL;AACA,2DAAsCE,eAAtC,EAAuDT,eAAvD;AACD;;AACD,SAAOQ,eAAP;AACD","sourcesContent":["import { ExpoConfig } from '@expo/config-types';\n\nimport { createAndroidManifestPlugin } from '../plugins/android-plugins';\nimport {\n  addMetaDataItemToMainApplication,\n  AndroidManifest,\n  getMainApplicationOrThrow,\n  removeMetaDataItemFromMainApplication,\n} from './Manifest';\n\nconst META_BRANCH_KEY = 'io.branch.sdk.BranchKey';\n\nexport const withBranch = createAndroidManifestPlugin(setBranchApiKey, 'withBranch');\n\nexport function getBranchApiKey(config: ExpoConfig) {\n  return config.android?.config?.branch?.apiKey ?? null;\n}\n\nexport function setBranchApiKey(config: ExpoConfig, androidManifest: AndroidManifest) {\n  const apiKey = getBranchApiKey(config);\n\n  const mainApplication = getMainApplicationOrThrow(androidManifest);\n\n  if (apiKey) {\n    // If the item exists, add it back\n    addMetaDataItemToMainApplication(mainApplication, META_BRANCH_KEY, apiKey);\n  } else {\n    // Remove any existing item\n    removeMetaDataItemFromMainApplication(mainApplication, META_BRANCH_KEY);\n  }\n  return androidManifest;\n}\n"],"file":"Branch.js"}